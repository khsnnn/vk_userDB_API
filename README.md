## Запуск

#### * Поднимите виртуальное окружение:

```bash
python -m venv venv
```

#### * Запустите окружение:

```bash
venv/scripts/activate
```

#### * Установите зависимости:

```bash
pip install -r requirements.txt
```

#### * Создайте файл .env (пример в .env.example)
* Запустите приложение

```bash
python main.py
```

## Тестирование

##### Запуск тестирования

```
pytest test_app.py
```

### Описание тестов

#### 1. `setup_test_user`

 **Описание** :
Фикстура создаёт тестового пользователя с заданными данными.
Если пользователь не может быть создан, тест завершится с ошибкой.

 **Данные пользователя** :

* `id`: 12345
* `label`: "User"
* `name`: "John Doe"
* `screen_name`: "Johny"
* `sex`: 1
* `city`: "la"
* `follows`: []
* `subscribed`: []

---

#### 2. `test_fetch_user`

 **Описание** :
Проверяет возможность получения данных о пользователе по его ID.

 **Шаги теста** :

1. Выполняется запрос `GET /user/12345`.
2. Проверяется код ответа (ожидается 200).
3. Проверяется соответствие возвращаемых данных созданному пользователю.

---

#### 3. `test_fetch_top_users`

 **Описание** :
Проверяет возможность получения списка пользователей с наибольшим числом подписчиков.

 **Шаги теста** :

1. Выполняется запрос `GET /top-users`.
2. Проверяется код ответа (ожидается 200).
3. Убедиться, что возвращаемые данные являются списком.

---

#### 4. `test_fetch_top_groups`

 **Описание** :
Проверяет возможность получения списка групп с наибольшим числом подписчиков.

 **Шаги теста** :

1. Выполняется запрос `GET /top-groups`.
2. Проверяется код ответа (ожидается 200).
3. Убедиться, что возвращаемые данные являются списком.

---

#### 5. `test_fetch_users_count`

 **Описание** :
Проверяет возможность получения общего количества пользователей.

 **Шаги теста** :

1. Выполняется запрос `GET /users-count`.
2. Проверяется код ответа (ожидается 200).
3. Убедиться, что в ответе присутствует поле `users_count`.

---

#### 6. `test_fetch_groups_count`

 **Описание** :
Проверяет возможность получения общего количества групп.

 **Шаги теста** :

1. Выполняется запрос `GET /groups-count`.
2. Проверяется код ответа (ожидается 200).
3. Убедиться, что в ответе присутствует поле `groups_count`.

---

#### 7. `test_fetch_all_nodes`

 **Описание** :
Проверяет возможность получения всех узлов графа.

 **Шаги теста** :

1. Выполняется запрос `GET /nodes`.
2. Проверяется код ответа (ожидается 200).
3. Убедиться, что возвращаемые данные являются списком.

---

#### 8. `test_delete_node_and_relations`

 **Описание** :
Проверяет возможность удаления узла и связанных с ним отношений.

 **Шаги теста** :

1. Выполняется запрос `GET /user/12345`, чтобы убедиться, что узел существует.
2. Выполняется запрос `DELETE /nodes/User/12345` для удаления узла.
3. Проверяется код ответа (ожидается 200) и статус удаления.
4. Выполняется повторный запрос `GET /user/12345`, чтобы убедиться, что узел успешно удалён (ожидается 404).
# vk_userDB_API
